TinyTimACSR<-function(name, chip, x, y, filter, focus){

 # system('tiny1 ')
    fileConn<-file(paste(name,'_run',sep=''))
    #ech1= paste('echo ',"#!/bin/bash",' >> ',name,'_run', sep = '')
    #system(echo1)
    tn1=paste('/usr/local/bin/tinytim-7.5/tiny1 ',name,"_parameter_file << EOF",sep='')
    #writeLines( tn1 , fileConn)
    writeLines( c("#!/bin/bash",tn1) ,sep = '\n', fileConn)
    close(fileConn)

    cat(15 ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(chip ,'\n',file=paste(name,'_run',sep=''),append=TRUE)           
    cat(x ,'\n',file=paste(name,'_run',sep=''),append=TRUE)           
    cat(y ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(filter ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(1 ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(13 ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(3.0 ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(focus ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat(paste(name,'_psf_image',sep='') ,'\n',file=paste(name,'_run',sep=''),append=TRUE)
    cat("EOF" ,'\n',file=paste(name,'_run',sep=''),append=TRUE)

    system2(paste('source ', name,'_run', sep=''))
    Sys.sleep(1)
    system(paste('/usr/local/bin/tinytim-7.5/tiny2 ',name,"_parameter_file",sep=''))
    Sys.sleep(3)
    system(paste('/usr/local/bin/tinytim-7.5/tiny3 ',name,"_parameter_file sub=1",sep=''))

    
}


